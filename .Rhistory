scale_size_manual(values=seq(0.15,5,by=0.1)) +
annotation_scale(location = "tl", width_hint = 0.2, unit_category="imperial", text_col="white", line_col="white") +  # adjust scale location as needed
annotation_scale(location = "tr", width_hint = 0.2, unit_category="metric",  text_col="white", line_col="white") +  # adjust scale location as needed
annotation_north_arrow(location = "tl", which_north = "true", # adjust arrow location as needed
pad_x = unit(0.2, "in"), pad_y = unit(0.5, "in"),
style = north_arrow_fancy_orienteering(text_col = "white", fill=c("darkgray", "white"), line_col="white"),
height = unit(1, "cm"), width = unit(1, "cm")) +
annotate("text", x=-87, y=31.03, label="Alabama", color="white", hjust=0.5, vjust=0.5, size=3, angle=0) +
annotate("text", x=-87, y=30.97, label="Florida", color="white", hjust=0.5, vjust=0.5, size=3, angle=0) +
labs(title = paste(river_name_plot, "River Basin")) +
coord_sf(expand = FALSE, xlim = c(xmin, xmax), ylim=c(ymin,ymax)) +
ylab("") +
xlab("") +
theme(panel.grid.major = element_line(color = gray(.5), linetype = "dashed", size = 0.7),
panel.background = element_rect(fill = "#1c5163"),
plot.title = element_text(color = "black", size = 16, hjust = 0.5))
# adjust x and y position and size of inset plot
xpos = 0.68
ypos = -0.06
size = 0.26
p2 <- ggdraw(p) +
draw_plot(gworld, width = size, height = size * 10/6 * gworld_ratio,
x = xpos, y = ypos, hjust=0, vjust=0)
# plot dimensions
# mess with the multipliers to get a nice figure
height = (ymax-ymin)*2.5
width = (xmax-xmin)*2.5
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=600, height=height, width=width)
ggsave(plot=p2, paste(wd, "maps/", river_name, ".pdf", sep=""), height=height, width=width)
# main plot
p <- ggplot() +
geom_sf(data=state_borders_sf_crop, fill="black", color=NA) +
#geom_raster(topo_crop_df, mapping = aes(x = x, y = y, alpha = GRAY_HR_SR_OB)) +
#scale_alpha(range =  c(0, 1), guide = "none") +
geom_sf(data=target_watershed_sf_crop, fill=alpha("white", 0.15), color=NA) +
geom_sf(data=all_wbs_swamps_sf_crop , fill="#002b0a", color=NA) +
geom_sf(data=rivers_sf_crop, color="#565656", lineend = "round", aes(size=factor(Strahler)), show.legend = FALSE) +
geom_sf(data=target_wbs_lakes_all_sf_crop, fill="#565656", color=NA) +
geom_sf(data=landBorders_sf_crop, fill=NA, color="white", size=0.7) +
geom_sf(data=target_wbs_swamps_sf_crop, fill=alpha("palegreen", 0.3), color=NA) +
geom_sf(data=inlet_sf, fill="#82eefd", color=NA)  +
geom_sf(data=target_wbs_lakes_sf_crop, fill="#82eefd", color=NA) +
geom_sf(data=target_rivers_ws_sf_crop, aes(size=factor(Strahler)), color="#82eefd",
show.legend = FALSE, lineend = "round") +
guides(color = guide_legend(override.aes = list(size=3))) +
#geom_point(data = cities_subset, aes(y=lat, x=long), pch=21, size=1, stroke=2, color="red", fill="black") +
#geom_label_repel(data = cities_subset[1,], aes(y=lat, x=long, label=paste(city,state,sep=",")),
#                 box.padding   = 0.35, size = 3, alpha=0.9, segment.alpha=1, point.padding = 0.5,
#                 ylim=c(30, 30.4),
#                 xlim=c(-88, -87.5),
#                 segment.color = 'red', show.legend = FALSE) +
scale_size_manual(values=seq(0.15,5,by=0.1)) +
annotation_scale(location = "tl", width_hint = 0.2, unit_category="imperial", text_col="white", line_col="white") +  # adjust scale location as needed
annotation_scale(location = "tr", width_hint = 0.2, unit_category="metric",  text_col="white", line_col="white") +  # adjust scale location as needed
annotation_north_arrow(location = "tl", which_north = "true", # adjust arrow location as needed
pad_x = unit(0.2, "in"), pad_y = unit(0.5, "in"),
style = north_arrow_fancy_orienteering(text_col = "white", fill=c("darkgray", "white"), line_col="white"),
height = unit(1, "cm"), width = unit(1, "cm")) +
annotate("text", x=-87, y=31.03, label="Alabama", color="white", hjust=0.5, vjust=0.5, size=3, angle=0) +
annotate("text", x=-87, y=30.97, label="Florida", color="white", hjust=0.5, vjust=0.5, size=3, angle=0) +
labs(title = paste(river_name_plot, "River Basin")) +
coord_sf(expand = FALSE, xlim = c(xmin, xmax), ylim=c(ymin,ymax)) +
ylab("") +
xlab("") +
theme(panel.grid.major = element_line(color = gray(.5), linetype = "dashed", size = 0.7),
panel.background = element_rect(fill = "#1c5163"),
plot.title = element_text(color = "black", size = 16, hjust = 0.5))
# adjust x and y position and size of inset plot
xpos = 0.1
ypos = -0.04
size = 0.26
p2 <- ggdraw(p) +
draw_plot(gworld, width = size, height = size * 10/6 * gworld_ratio,
x = xpos, y = ypos, hjust=0, vjust=0)
# plot dimensions
# mess with the multipliers to get a nice figure
height = (ymax-ymin)*2.5
width = (xmax-xmin)*2.5
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=600, height=height, width=width)
ggsave(plot=p2, paste(wd, "maps/", river_name, ".pdf", sep=""), height=height, width=width)
# adjust x and y position and size of inset plot
xpos = 0.13
ypos = -0.04
size = 0.28
p2 <- ggdraw(p) +
draw_plot(gworld, width = size, height = size * 10/6 * gworld_ratio,
x = xpos, y = ypos, hjust=0, vjust=0)
# plot dimensions
# mess with the multipliers to get a nice figure
height = (ymax-ymin)*2.5
width = (xmax-xmin)*2.5
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=600, height=height, width=width)
ggsave(plot=p2, paste(wd, "maps/", river_name, ".pdf", sep=""), height=height, width=width)
# adjust x and y position and size of inset plot
xpos = 0.15
ypos = -0.035
size = 0.28
p2 <- ggdraw(p) +
draw_plot(gworld, width = size, height = size * 10/6 * gworld_ratio,
x = xpos, y = ypos, hjust=0, vjust=0)
# plot dimensions
# mess with the multipliers to get a nice figure
height = (ymax-ymin)*2.5
width = (xmax-xmin)*2.5
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=600, height=height, width=width)
ggsave(plot=p2, paste(wd, "maps/", river_name, ".pdf", sep=""), height=height, width=width)
# adjust x and y position and size of inset plot
xpos = 0.16
ypos = -0.035
size = 0.28
p2 <- ggdraw(p) +
draw_plot(gworld, width = size, height = size * 10/6 * gworld_ratio,
x = xpos, y = ypos, hjust=0, vjust=0)
# plot dimensions
# mess with the multipliers to get a nice figure
height = (ymax-ymin)*2.5
width = (xmax-xmin)*2.5
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=600, height=height, width=width)
ggsave(plot=p2, paste(wd, "maps/", river_name, ".pdf", sep=""), height=height, width=width)
# adjust x and y position and size of inset plot
xpos = 0.18
ypos = -0.035
size = 0.28
p2 <- ggdraw(p) +
draw_plot(gworld, width = size, height = size * 10/6 * gworld_ratio,
x = xpos, y = ypos, hjust=0, vjust=0)
# plot dimensions
# mess with the multipliers to get a nice figure
height = (ymax-ymin)*2.5
width = (xmax-xmin)*2.5
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=600, height=height, width=width)
ggsave(plot=p2, paste(wd, "maps/", river_name, ".pdf", sep=""), height=height, width=width)
cities_subset <- cities_subset[1,]
cities_subset[1,] <- c("MS", "Pascagoula", 30.3658, -88.5561)
cities_subset[,3] <- as.numeric(cities_subset[,3])
cities_subset[,4] <- as.numeric(cities_subset[,4])
# main plot
p <- ggplot() +
geom_sf(data=state_borders_sf_crop, fill="black", color=NA) +
#geom_raster(topo_crop_df, mapping = aes(x = x, y = y, alpha = GRAY_HR_SR_OB)) +
#scale_alpha(range =  c(0, 1), guide = "none") +
geom_sf(data=target_watershed_sf_crop, fill=alpha("white", 0.15), color=NA) +
geom_sf(data=all_wbs_swamps_sf_crop , fill="#002b0a", color=NA) +
geom_sf(data=rivers_sf_crop, color="#565656", lineend = "round", aes(size=factor(Strahler)), show.legend = FALSE) +
geom_sf(data=target_wbs_lakes_all_sf_crop, fill="#565656", color=NA) +
geom_sf(data=landBorders_sf_crop, fill=NA, color="white", size=0.7) +
geom_sf(data=target_wbs_swamps_sf_crop, fill=alpha("palegreen", 0.3), color=NA) +
geom_sf(data=inlet_sf, fill="#82eefd", color=NA)  +
geom_sf(data=target_wbs_lakes_sf_crop, fill="#82eefd", color=NA) +
geom_sf(data=target_rivers_ws_sf_crop, aes(size=factor(Strahler)), color="#82eefd",
show.legend = FALSE, lineend = "round") +
guides(color = guide_legend(override.aes = list(size=3))) +
geom_point(data = cities_subset, aes(y=lat, x=long), pch=21, size=1, stroke=2, color="red", fill="black") +
geom_label_repel(data = cities_subset[1,], aes(y=lat, x=long, label=paste(city,state,sep=",")),
box.padding   = 0.35, size = 3, alpha=0.9, segment.alpha=1, point.padding = 0.5,
ylim=c(30.4, 30.6),
xlim=c(-90, -88.7),
segment.color = 'red', show.legend = FALSE) +
scale_size_manual(values=seq(0.15,5,by=0.1)) +
annotation_scale(location = "tl", width_hint = 0.2, unit_category="imperial", text_col="white", line_col="white") +  # adjust scale location as needed
annotation_scale(location = "tr", width_hint = 0.2, unit_category="metric",  text_col="white", line_col="white") +  # adjust scale location as needed
annotation_north_arrow(location = "tl", which_north = "true", # adjust arrow location as needed
pad_x = unit(0.2, "in"), pad_y = unit(0.5, "in"),
style = north_arrow_fancy_orienteering(text_col = "white", fill=c("darkgray", "white"), line_col="white"),
height = unit(1, "cm"), width = unit(1, "cm")) +
annotate("text", x=-88.4, y=32.7, label="Alabama", color="white", hjust=0.5, vjust=0.5, size=3, angle=80) +
annotate("text", x=-88.45, y=32.7, label="Mississippi", color="white", hjust=0.5, vjust=0.5, size=3, angle=80) +
labs(title = paste(river_name_plot, "River Basin")) +
coord_sf(expand = FALSE, xlim = c(xmin, xmax), ylim=c(ymin,ymax)) +
ylab("") +
xlab("") +
theme(panel.grid.major = element_line(color = gray(.5), linetype = "dashed", size = 0.7),
panel.background = element_rect(fill = "#1c5163"),
plot.title = element_text(color = "black", size = 16, hjust = 0.5))
# adjust x and y position and size of inset plot
xpos = 0.18
ypos = -0.035
size = 0.28
p2 <- ggdraw(p) +
draw_plot(gworld, width = size, height = size * 10/6 * gworld_ratio,
x = xpos, y = ypos, hjust=0, vjust=0)
# plot dimensions
# mess with the multipliers to get a nice figure
height = (ymax-ymin)*2.5
width = (xmax-xmin)*2.5
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=600, height=height, width=width)
ggsave(plot=p2, paste(wd, "maps/", river_name, ".pdf", sep=""), height=height, width=width)
# main plot
p <- ggplot() +
geom_sf(data=state_borders_sf_crop, fill="black", color=NA) +
#geom_raster(topo_crop_df, mapping = aes(x = x, y = y, alpha = GRAY_HR_SR_OB)) +
#scale_alpha(range =  c(0, 1), guide = "none") +
geom_sf(data=target_watershed_sf_crop, fill=alpha("white", 0.15), color=NA) +
geom_sf(data=all_wbs_swamps_sf_crop , fill="#002b0a", color=NA) +
geom_sf(data=rivers_sf_crop, color="#565656", lineend = "round", aes(size=factor(Strahler)), show.legend = FALSE) +
geom_sf(data=target_wbs_lakes_all_sf_crop, fill="#565656", color=NA) +
geom_sf(data=landBorders_sf_crop, fill=NA, color="white", size=0.7) +
geom_sf(data=target_wbs_swamps_sf_crop, fill=alpha("palegreen", 0.3), color=NA) +
geom_sf(data=inlet_sf, fill="#82eefd", color=NA)  +
geom_sf(data=target_wbs_lakes_sf_crop, fill="#82eefd", color=NA) +
geom_sf(data=target_rivers_ws_sf_crop, aes(size=factor(Strahler)), color="#82eefd",
show.legend = FALSE, lineend = "round") +
guides(color = guide_legend(override.aes = list(size=3))) +
geom_point(data = cities_subset, aes(y=lat, x=long), pch=21, size=1, stroke=2, color="red", fill="black") +
geom_label_repel(data = cities_subset[1,], aes(y=lat, x=long, label=paste(city,state,sep=",")),
box.padding   = 0.35, size = 3, alpha=0.9, segment.alpha=1, point.padding = 0.5,
ylim=c(30.4, 30.6),
xlim=c(-90, -88.7),
segment.color = 'red', show.legend = FALSE) +
scale_size_manual(values=seq(0.15,5,by=0.1)) +
annotation_scale(location = "tl", width_hint = 0.2, unit_category="imperial", text_col="white", line_col="white") +  # adjust scale location as needed
annotation_scale(location = "tr", width_hint = 0.2, unit_category="metric",  text_col="white", line_col="white") +  # adjust scale location as needed
annotation_north_arrow(location = "tl", which_north = "true", # adjust arrow location as needed
pad_x = unit(0.2, "in"), pad_y = unit(0.5, "in"),
style = north_arrow_fancy_orienteering(text_col = "white", fill=c("darkgray", "white"), line_col="white"),
height = unit(1, "cm"), width = unit(1, "cm")) +
annotate("text", x=-88.38, y=32.7, label="Alabama", color="white", hjust=0.5, vjust=0.5, size=3, angle=85) +
annotate("text", x=-88.43, y=32.7, label="Mississippi", color="white", hjust=0.5, vjust=0.5, size=3, angle=85) +
labs(title = paste(river_name_plot, "River Basin")) +
coord_sf(expand = FALSE, xlim = c(xmin, xmax), ylim=c(ymin,ymax)) +
ylab("") +
xlab("") +
theme(panel.grid.major = element_line(color = gray(.5), linetype = "dashed", size = 0.7),
panel.background = element_rect(fill = "#1c5163"),
plot.title = element_text(color = "black", size = 16, hjust = 0.5))
# adjust x and y position and size of inset plot
xpos = 0.18
ypos = -0.035
size = 0.28
p2 <- ggdraw(p) +
draw_plot(gworld, width = size, height = size * 10/6 * gworld_ratio,
x = xpos, y = ypos, hjust=0, vjust=0)
# plot dimensions
# mess with the multipliers to get a nice figure
height = (ymax-ymin)*2.5
width = (xmax-xmin)*2.5
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=600, height=height, width=width)
ggsave(plot=p2, paste(wd, "maps/", river_name, ".pdf", sep=""), height=height, width=width)
# main plot
p <- ggplot() +
geom_sf(data=state_borders_sf_crop, fill="black", color=NA) +
#geom_raster(topo_crop_df, mapping = aes(x = x, y = y, alpha = GRAY_HR_SR_OB)) +
#scale_alpha(range =  c(0, 1), guide = "none") +
geom_sf(data=target_watershed_sf_crop, fill=alpha("white", 0.15), color=NA) +
geom_sf(data=all_wbs_swamps_sf_crop , fill="#002b0a", color=NA) +
geom_sf(data=rivers_sf_crop, color="#565656", lineend = "round", aes(size=factor(Strahler)), show.legend = FALSE) +
geom_sf(data=target_wbs_lakes_all_sf_crop, fill="#565656", color=NA) +
geom_sf(data=landBorders_sf_crop, fill=NA, color="white", size=0.7) +
geom_sf(data=target_wbs_swamps_sf_crop, fill=alpha("palegreen", 0.3), color=NA) +
geom_sf(data=inlet_sf, fill="#82eefd", color=NA)  +
geom_sf(data=target_wbs_lakes_sf_crop, fill="#82eefd", color=NA) +
geom_sf(data=target_rivers_ws_sf_crop, aes(size=factor(Strahler)), color="#82eefd",
show.legend = FALSE, lineend = "round") +
guides(color = guide_legend(override.aes = list(size=3))) +
geom_point(data = cities_subset, aes(y=lat, x=long), pch=21, size=1, stroke=2, color="red", fill="black") +
geom_label_repel(data = cities_subset[1,], aes(y=lat, x=long, label=paste(city,state,sep=",")),
box.padding   = 0.35, size = 3, alpha=0.9, segment.alpha=1, point.padding = 0.5,
ylim=c(30.4, 30.6),
xlim=c(-90, -88.7),
segment.color = 'red', show.legend = FALSE) +
scale_size_manual(values=seq(0.15,5,by=0.1)) +
annotation_scale(location = "tl", width_hint = 0.2, unit_category="imperial", text_col="white", line_col="white") +  # adjust scale location as needed
annotation_scale(location = "tr", width_hint = 0.2, unit_category="metric",  text_col="white", line_col="white") +  # adjust scale location as needed
annotation_north_arrow(location = "tl", which_north = "true", # adjust arrow location as needed
pad_x = unit(0.2, "in"), pad_y = unit(0.5, "in"),
style = north_arrow_fancy_orienteering(text_col = "white", fill=c("darkgray", "white"), line_col="white"),
height = unit(1, "cm"), width = unit(1, "cm")) +
annotate("text", x=-88.35, y=32.7, label="Alabama", color="white", hjust=0.5, vjust=0.5, size=3, angle=85) +
annotate("text", x=-88.42, y=32.7, label="Mississippi", color="white", hjust=0.5, vjust=0.5, size=3, angle=85) +
labs(title = paste(river_name_plot, "River Basin")) +
coord_sf(expand = FALSE, xlim = c(xmin, xmax), ylim=c(ymin,ymax)) +
ylab("") +
xlab("") +
theme(panel.grid.major = element_line(color = gray(.5), linetype = "dashed", size = 0.7),
panel.background = element_rect(fill = "#1c5163"),
plot.title = element_text(color = "black", size = 16, hjust = 0.5))
# adjust x and y position and size of inset plot
xpos = 0.18
ypos = -0.035
size = 0.28
p2 <- ggdraw(p) +
draw_plot(gworld, width = size, height = size * 10/6 * gworld_ratio,
x = xpos, y = ypos, hjust=0, vjust=0)
# plot dimensions
# mess with the multipliers to get a nice figure
height = (ymax-ymin)*2.5
width = (xmax-xmin)*2.5
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=600, height=height, width=width)
ggsave(plot=p2, paste(wd, "maps/", river_name, ".pdf", sep=""), height=height, width=width)
# main plot
p <- ggplot() +
geom_sf(data=state_borders_sf_crop, fill="black", color=NA) +
#geom_raster(topo_crop_df, mapping = aes(x = x, y = y, alpha = GRAY_HR_SR_OB)) +
#scale_alpha(range =  c(0, 1), guide = "none") +
geom_sf(data=target_watershed_sf_crop, fill=alpha("white", 0.15), color=NA) +
geom_sf(data=all_wbs_swamps_sf_crop , fill="#002b0a", color=NA) +
geom_sf(data=rivers_sf_crop, color="#565656", lineend = "round", aes(size=factor(Strahler)), show.legend = FALSE) +
geom_sf(data=target_wbs_lakes_all_sf_crop, fill="#565656", color=NA) +
geom_sf(data=landBorders_sf_crop, fill=NA, color="white", size=0.7) +
geom_sf(data=target_wbs_swamps_sf_crop, fill=alpha("palegreen", 0.3), color=NA) +
geom_sf(data=inlet_sf, fill="#82eefd", color=NA)  +
geom_sf(data=target_wbs_lakes_sf_crop, fill="#82eefd", color=NA) +
geom_sf(data=target_rivers_ws_sf_crop, aes(size=factor(Strahler)), color="#82eefd",
show.legend = FALSE, lineend = "round") +
guides(color = guide_legend(override.aes = list(size=3))) +
geom_point(data = cities_subset, aes(y=lat, x=long), pch=21, size=1, stroke=2, color="red", fill="black") +
geom_label_repel(data = cities_subset[1,], aes(y=lat, x=long, label=paste(city,state,sep=",")),
box.padding   = 0.35, size = 3, alpha=0.9, segment.alpha=1, point.padding = 0.5,
ylim=c(30.4, 30.6),
xlim=c(-90, -88.7),
segment.color = 'red', show.legend = FALSE) +
scale_size_manual(values=seq(0.15,5,by=0.1)) +
annotation_scale(location = "tl", width_hint = 0.2, unit_category="imperial", text_col="white", line_col="white") +  # adjust scale location as needed
annotation_scale(location = "tr", width_hint = 0.2, unit_category="metric",  text_col="white", line_col="white") +  # adjust scale location as needed
annotation_north_arrow(location = "tl", which_north = "true", # adjust arrow location as needed
pad_x = unit(0.2, "in"), pad_y = unit(0.5, "in"),
style = north_arrow_fancy_orienteering(text_col = "white", fill=c("darkgray", "white"), line_col="white"),
height = unit(1, "cm"), width = unit(1, "cm")) +
annotate("text", x=-88.34, y=32.7, label="Alabama", color="white", hjust=0.5, vjust=0.5, size=3, angle=85) +
annotate("text", x=-88.42, y=32.7, label="Mississippi", color="white", hjust=0.5, vjust=0.5, size=3, angle=85) +
labs(title = paste(river_name_plot, "River Basin")) +
coord_sf(expand = FALSE, xlim = c(xmin, xmax), ylim=c(ymin,ymax)) +
ylab("") +
xlab("") +
theme(panel.grid.major = element_line(color = gray(.5), linetype = "dashed", size = 0.7),
panel.background = element_rect(fill = "#1c5163"),
plot.title = element_text(color = "black", size = 16, hjust = 0.5))
# adjust x and y position and size of inset plot
xpos = 0.18
ypos = -0.035
size = 0.28
p2 <- ggdraw(p) +
draw_plot(gworld, width = size, height = size * 10/6 * gworld_ratio,
x = xpos, y = ypos, hjust=0, vjust=0)
# plot dimensions
# mess with the multipliers to get a nice figure
height = (ymax-ymin)*2.5
width = (xmax-xmin)*2.5
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=600, height=height, width=width)
ggsave(plot=p2, paste(wd, "maps/", river_name, ".pdf", sep=""), height=height, width=width)
# calculate area of watershed square km
raster::area(target_watershed) / 1000000
# calculate area of watershed in square miles
(raster::area(target_watershed) / 1000000) * 0.386102
# main plot
p <- ggplot() +
geom_sf(data=state_borders_sf_crop, fill="black", color=NA) +
#geom_raster(topo_crop_df, mapping = aes(x = x, y = y, alpha = GRAY_HR_SR_OB)) +
#scale_alpha(range =  c(0, 1), guide = "none") +
geom_sf(data=target_watershed_sf_crop, fill=alpha("white", 0.15), color=NA) +
geom_sf(data=all_wbs_swamps_sf_crop , fill="#002b0a", color=NA) +
geom_sf(data=rivers_sf_crop, color="#565656", lineend = "round", aes(size=factor(Strahler)), show.legend = FALSE) +
geom_sf(data=target_wbs_lakes_all_sf_crop, fill="#565656", color=NA) +
geom_sf(data=landBorders_sf_crop, fill=NA, color="white", size=0.7) +
geom_sf(data=target_wbs_swamps_sf_crop, fill=alpha("palegreen", 0.3), color=NA) +
geom_sf(data=inlet_sf, fill="#82eefd", color=NA)  +
geom_sf(data=target_wbs_lakes_sf_crop, fill="#82eefd", color=NA) +
geom_sf(data=target_rivers_ws_sf_crop, aes(size=factor(Strahler)), color="#82eefd",
show.legend = FALSE, lineend = "round") +
guides(color = guide_legend(override.aes = list(size=3))) +
geom_point(data = cities_subset, aes(y=lat, x=long), pch=21, size=1, stroke=2, color="red", fill="black") +
geom_label_repel(data = cities_subset[1,], aes(y=lat, x=long, label=paste(city,state,sep=",")),
box.padding   = 0.35, size = 3, alpha=0.9, segment.alpha=1, point.padding = 0.5,
ylim=c(30.4, 30.6),
xlim=c(-90, -88.7),
segment.color = 'red', show.legend = FALSE) +
scale_size_manual(values=seq(0.12,5,by=0.08)) +
annotation_scale(location = "tl", width_hint = 0.2, unit_category="imperial", text_col="white", line_col="white") +  # adjust scale location as needed
annotation_scale(location = "tr", width_hint = 0.2, unit_category="metric",  text_col="white", line_col="white") +  # adjust scale location as needed
annotation_north_arrow(location = "tl", which_north = "true", # adjust arrow location as needed
pad_x = unit(0.2, "in"), pad_y = unit(0.5, "in"),
style = north_arrow_fancy_orienteering(text_col = "white", fill=c("darkgray", "white"), line_col="white"),
height = unit(1, "cm"), width = unit(1, "cm")) +
annotate("text", x=-88.34, y=32.7, label="Alabama", color="white", hjust=0.5, vjust=0.5, size=3, angle=85) +
annotate("text", x=-88.42, y=32.7, label="Mississippi", color="white", hjust=0.5, vjust=0.5, size=3, angle=85) +
labs(title = paste(river_name_plot, "River Basin")) +
coord_sf(expand = FALSE, xlim = c(xmin, xmax), ylim=c(ymin,ymax)) +
ylab("") +
xlab("") +
theme(panel.grid.major = element_line(color = gray(.5), linetype = "dashed", size = 0.7),
panel.background = element_rect(fill = "#1c5163"),
plot.title = element_text(color = "black", size = 16, hjust = 0.5))
# adjust x and y position and size of inset plot
xpos = 0.18
ypos = -0.035
size = 0.28
p2 <- ggdraw(p) +
draw_plot(gworld, width = size, height = size * 10/6 * gworld_ratio,
x = xpos, y = ypos, hjust=0, vjust=0)
# plot dimensions
# mess with the multipliers to get a nice figure
height = (ymax-ymin)*2.5
width = (xmax-xmin)*2.5
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=600, height=height, width=width)
ggsave(plot=p2, paste(wd, "maps/", river_name, ".pdf", sep=""), height=height, width=width)
# main plot
p <- ggplot() +
geom_sf(data=state_borders_sf_crop, fill="black", color=NA) +
#geom_raster(topo_crop_df, mapping = aes(x = x, y = y, alpha = GRAY_HR_SR_OB)) +
#scale_alpha(range =  c(0, 1), guide = "none") +
geom_sf(data=target_watershed_sf_crop, fill=alpha("white", 0.15), color=NA) +
geom_sf(data=all_wbs_swamps_sf_crop , fill="#002b0a", color=NA) +
geom_sf(data=rivers_sf_crop, color="#565656", lineend = "round", aes(size=factor(Strahler)), show.legend = FALSE) +
geom_sf(data=target_wbs_lakes_all_sf_crop, fill="#565656", color=NA) +
geom_sf(data=landBorders_sf_crop, fill=NA, color="white", size=0.7) +
geom_sf(data=target_wbs_swamps_sf_crop, fill=alpha("palegreen", 0.3), color=NA) +
geom_sf(data=inlet_sf, fill="#82eefd", color=NA)  +
geom_sf(data=target_wbs_lakes_sf_crop, fill="#82eefd", color=NA) +
geom_sf(data=target_rivers_ws_sf_crop, aes(size=factor(Strahler)), color="#82eefd",
show.legend = FALSE, lineend = "round") +
guides(color = guide_legend(override.aes = list(size=3))) +
geom_point(data = cities_subset, aes(y=lat, x=long), pch=21, size=1, stroke=2, color="red", fill="black") +
geom_label_repel(data = cities_subset[1,], aes(y=lat, x=long, label=paste(city,state,sep=",")),
box.padding   = 0.35, size = 3, alpha=0.9, segment.alpha=1, point.padding = 0.5,
ylim=c(30.4, 30.6),
xlim=c(-90, -88.7),
segment.color = 'red', show.legend = FALSE) +
scale_size_manual(values=seq(0.15,5,by=0.08)) +
annotation_scale(location = "tl", width_hint = 0.2, unit_category="imperial", text_col="white", line_col="white") +  # adjust scale location as needed
annotation_scale(location = "tr", width_hint = 0.2, unit_category="metric",  text_col="white", line_col="white") +  # adjust scale location as needed
annotation_north_arrow(location = "tl", which_north = "true", # adjust arrow location as needed
pad_x = unit(0.2, "in"), pad_y = unit(0.5, "in"),
style = north_arrow_fancy_orienteering(text_col = "white", fill=c("darkgray", "white"), line_col="white"),
height = unit(1, "cm"), width = unit(1, "cm")) +
annotate("text", x=-88.34, y=32.7, label="Alabama", color="white", hjust=0.5, vjust=0.5, size=3, angle=85) +
annotate("text", x=-88.42, y=32.7, label="Mississippi", color="white", hjust=0.5, vjust=0.5, size=3, angle=85) +
labs(title = paste(river_name_plot, "River Basin")) +
coord_sf(expand = FALSE, xlim = c(xmin, xmax), ylim=c(ymin,ymax)) +
ylab("") +
xlab("") +
theme(panel.grid.major = element_line(color = gray(.5), linetype = "dashed", size = 0.7),
panel.background = element_rect(fill = "#1c5163"),
plot.title = element_text(color = "black", size = 16, hjust = 0.5))
# adjust x and y position and size of inset plot
xpos = 0.18
ypos = -0.035
size = 0.28
p2 <- ggdraw(p) +
draw_plot(gworld, width = size, height = size * 10/6 * gworld_ratio,
x = xpos, y = ypos, hjust=0, vjust=0)
# plot dimensions
# mess with the multipliers to get a nice figure
height = (ymax-ymin)*2.5
width = (xmax-xmin)*2.5
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=600, height=height, width=width)
ggsave(plot=p2, paste(wd, "maps/", river_name, ".pdf", sep=""), height=height, width=width)
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=900, height=height, width=width)
# main plot
p <- ggplot() +
geom_sf(data=state_borders_sf_crop, fill="black", color=NA) +
#geom_raster(topo_crop_df, mapping = aes(x = x, y = y, alpha = GRAY_HR_SR_OB)) +
#scale_alpha(range =  c(0, 1), guide = "none") +
geom_sf(data=target_watershed_sf_crop, fill=alpha("white", 0.15), color=NA) +
geom_sf(data=all_wbs_swamps_sf_crop , fill="#002b0a", color=NA) +
geom_sf(data=rivers_sf_crop, color="#565656", lineend = "round", aes(size=factor(Strahler)), show.legend = FALSE) +
geom_sf(data=target_wbs_lakes_all_sf_crop, fill="#565656", color=NA) +
geom_sf(data=landBorders_sf_crop, fill=NA, color="white", size=0.7) +
geom_sf(data=target_wbs_swamps_sf_crop, fill=alpha("palegreen", 0.3), color=NA) +
geom_sf(data=inlet_sf, fill="#82eefd", color=NA)  +
geom_sf(data=target_wbs_lakes_sf_crop, fill="#82eefd", color=NA) +
geom_sf(data=target_rivers_ws_sf_crop, aes(size=factor(Strahler)), color="#82eefd",
show.legend = FALSE, lineend = "round") +
guides(color = guide_legend(override.aes = list(size=3))) +
geom_point(data = cities_subset, aes(y=lat, x=long), pch=21, size=1, stroke=2, color="red", fill="black") +
geom_label_repel(data = cities_subset[1,], aes(y=lat, x=long, label=paste(city,state,sep=",")),
box.padding   = 0.35, size = 3, alpha=0.9, segment.alpha=1, point.padding = 0.5,
ylim=c(30.4, 30.6),
xlim=c(-90, -88.7),
segment.color = 'red', show.legend = FALSE) +
scale_size_manual(values=seq(0.08,5,by=0.08)) +
annotation_scale(location = "tl", width_hint = 0.2, unit_category="imperial", text_col="white", line_col="white") +  # adjust scale location as needed
annotation_scale(location = "tr", width_hint = 0.2, unit_category="metric",  text_col="white", line_col="white") +  # adjust scale location as needed
annotation_north_arrow(location = "tl", which_north = "true", # adjust arrow location as needed
pad_x = unit(0.2, "in"), pad_y = unit(0.5, "in"),
style = north_arrow_fancy_orienteering(text_col = "white", fill=c("darkgray", "white"), line_col="white"),
height = unit(1, "cm"), width = unit(1, "cm")) +
annotate("text", x=-88.34, y=32.7, label="Alabama", color="white", hjust=0.5, vjust=0.5, size=3, angle=85) +
annotate("text", x=-88.42, y=32.7, label="Mississippi", color="white", hjust=0.5, vjust=0.5, size=3, angle=85) +
labs(title = paste(river_name_plot, "River Basin")) +
coord_sf(expand = FALSE, xlim = c(xmin, xmax), ylim=c(ymin,ymax)) +
ylab("") +
xlab("") +
theme(panel.grid.major = element_line(color = gray(.5), linetype = "dashed", size = 0.7),
panel.background = element_rect(fill = "#1c5163"),
plot.title = element_text(color = "black", size = 16, hjust = 0.5))
# adjust x and y position and size of inset plot
xpos = 0.18
ypos = -0.035
size = 0.28
p2 <- ggdraw(p) +
draw_plot(gworld, width = size, height = size * 10/6 * gworld_ratio,
x = xpos, y = ypos, hjust=0, vjust=0)
# plot dimensions
# mess with the multipliers to get a nice figure
height = (ymax-ymin)*2.5
width = (xmax-xmin)*2.5
# save as png
ggsave(plot=p2, paste(wd, "maps/", river_name, ".png", sep=""), units = "in", dpi=900, height=height, width=width)
ggsave(plot=p2, paste(wd, "maps/", river_name, ".pdf", sep=""), height=height, width=width)
